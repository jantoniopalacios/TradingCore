{"config":{"lang":["es"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"\ud83d\udcc8 TradingCore: Motor Central y Arquitectura Modular","text":"<p>Este repositorio contiene la arquitectura central (Motor) para m\u00faltiples escenarios de trading (Backtesting, Live Trading, Web Apps).</p>"},{"location":"#inicio-rapido-escenario-local","title":"\ud83d\ude80 Inicio R\u00e1pido (Escenario Local)","text":"<p>Para ejecutar el escenario de Backtesting Local:</p> <ol> <li>Navegar al Escenario: <code>bash     cd scenarios/BacktestLocal</code></li> <li>Crear y Activar Entorno Virtual: <code>bash     python -m venv .venv     .\\.venv\\Scripts\\activate</code></li> <li>Instalar Motor Central y Dependencias: <code>bash     pip install -r requirements.txt     pip install -e ../../engines/trading_engine # Instala el motor</code></li> <li>Ejecutar el Backtest: <code>bash     python test_backtest.py</code></li> </ol>"},{"location":"#estructura-del-repositorio","title":"\ud83d\udee0\ufe0f Estructura del Repositorio","text":"Directorio Contenido <code>engines/trading_engine/</code> El Motor Central (L\u00f3gica de Trading). C\u00f3digo reutilizable. <code>scenarios/BacktestLocal/</code> Proyecto de backtesting local, que consume el motor. <code>scenarios/TradingWebLive/</code> (Futuro) Proyecto de ejecuci\u00f3n en vivo (web o API)."},{"location":"#documentacion-detallada","title":"\ud83d\udca1 Documentaci\u00f3n Detallada","text":"<p>Para comprender la Arquitectura, Clases, Interfaces y Dise\u00f1o Funcional del motor, consulte:</p> <p>\u27a1\ufe0f ARCHITECTURE.md</p>"},{"location":"ARCHITECTURE/","title":"\ud83c\udfdb\ufe0f DOCUMENTACI\u00d3N DE ARQUITECTURA (Backend / Motor de Trading)","text":"<p>Este documento describe la estructura modular, las responsabilidades de los componentes y las interfaces clave del Motor Central (<code>trading_engine</code>).</p>"},{"location":"ARCHITECTURE/#1-diseno-arquitectonico-monorepo-modular","title":"1. Dise\u00f1o Arquitect\u00f3nico: Monorepo Modular","text":"<p>El proyecto <code>TradingCore</code> sigue una arquitectura de Monorepo Modular. M\u00faltiples proyectos de ejecuci\u00f3n (Escenarios) consumen una \u00fanica biblioteca central de l\u00f3gica (el Motor).</p> <ul> <li>Principio Clave: El Motor Central es la \u00fanica Fuente de Verdad para la l\u00f3gica de Trading. Los Escenarios solo gestionan la Ejecuci\u00f3n, la Configuraci\u00f3n y la Comunicaci\u00f3n (Backtesting, Live Trading, Web App).</li> </ul> Componente Ubicaci\u00f3n Rol Principal Motor Central <code>engines/trading_engine/</code> L\u00f3gica de Negocio (Decisi\u00f3n), C\u00e1lculos de Indicadores, Gesti\u00f3n de Datos Base. Escenarios <code>scenarios/</code> Puntos de entrada para la ejecuci\u00f3n (ej. <code>BacktestLocal</code>, <code>TradingWebLive</code>)."},{"location":"ARCHITECTURE/#2-estructura-del-motor-trading_engine","title":"2. Estructura del Motor (<code>trading_engine</code>)","text":""},{"location":"ARCHITECTURE/#21-modulo-core-srctrading_enginecore","title":"2.1. M\u00f3dulo <code>core</code> (<code>src/trading_engine/core/</code>)","text":"<p>Contiene las funciones controladoras que son llamadas en cada tick o barra de precio.</p> Archivo Interfaz Clave Responsabilidad <code>Logica_Trading.py</code> <code>check_buy_signal(strategy_self)</code> Determina la se\u00f1al de Entrada. <code>Logica_Trading.py</code> <code>manage_existing_position(strategy_self)</code> Gestiona el Riesgo y la Salida (SL/TP/Trailing). <p>IMPORTANTE: Estas funciones deben ser puras en cuanto a la l\u00f3gica de negocio. No deben contener l\u00f3gica de ejecuci\u00f3n del backtest (ej. <code>self.buy()</code>).</p>"},{"location":"ARCHITECTURE/#22-modulo-indicators-srctrading_engineindicators","title":"2.2. M\u00f3dulo <code>indicators</code> (<code>src/trading_engine/indicators/</code>)","text":"<p>Contiene la implementaci\u00f3n de indicadores t\u00e9cnicos y filtros complejos.</p> <ul> <li>Convenci\u00f3n: Los indicadores deben implementarse como clases o funciones que devuelven series de datos (<code>pd.Series</code>) o clases Helper que facilitan la evaluaci\u00f3n (<code>StochHelper</code>).</li> </ul>"},{"location":"ARCHITECTURE/#3-interfaz-de-la-estrategia-clase-system","title":"3. Interfaz de la Estrategia (Clase <code>System</code>)","text":"<p>La clase <code>System</code> (ubicada en cada <code>estrategia_system.py</code>) es la interfaz de comunicaci\u00f3n entre el entorno de ejecuci\u00f3n (Backtesting) y el Motor Central.</p> <p>Responsabilidades de <code>System</code>:</p> <ol> <li>Definici\u00f3n de Par\u00e1metros: Declara los atributos de configuraci\u00f3n (ej. <code>ema_slow_period = 50</code>).</li> <li>Inicializaci\u00f3n (<code>init</code>): Calcula todos los indicadores necesarios y los adjunta a <code>self</code> (ej. <code>self.ema_slow = self.I(...)</code>).</li> <li>Delegaci\u00f3n (<code>next</code>): Llama a las funciones del Motor Central:     <code>python     if self.position:         manage_existing_position(self)     else:         if check_buy_signal(self):             self.buy()</code></li> </ol>"},{"location":"ARCHITECTURE/#4-guia-para-desarrolladores","title":"4. Gu\u00eda para Desarrolladores","text":"<p>Para a\u00f1adir una nueva funcionalidad (ej. un nuevo filtro de volumen):</p> <ol> <li>Implementaci\u00f3n del Filtro: Implementar el c\u00e1lculo en <code>engines/trading_engine/indicators/</code>.</li> <li>Exposici\u00f3n: Asegurar que el c\u00e1lculo se realice y se adjunte a <code>self</code> en el m\u00e9todo <code>System.init()</code>.</li> <li>Uso: Modificar las funciones <code>check_buy_signal()</code> o <code>manage_existing_position()</code> en <code>Logica_Trading.py</code> para utilizar el nuevo filtro.</li> </ol>"},{"location":"api/motor_core/","title":"Referencia API: Motor Central","text":"<p>Este m\u00f3dulo contiene las funciones de coordinaci\u00f3n y toma de decisiones del motor.</p>"},{"location":"api/motor_core/#logica-de-trading","title":"L\u00f3gica de Trading","text":"<p>El fichero Logica_Trading.py contiene las funciones centrales que definen el comportamiento y las reglas de decisi\u00f3n de la  estrategia de backtesting System.</p> <p>ACTUALIZACI\u00d3N: Este m\u00f3dulo ahora act\u00faa como COORDINADOR, delegando la l\u00f3gica espec\u00edfica de cada indicador  a los m\u00f3dulos de la carpeta 'indicators' para mejorar la modularidad y el mantenimiento.</p>"},{"location":"api/motor_core/#trading_engine.core.Logica_Trading.check_buy_signal","title":"<code>check_buy_signal(strategy_self)</code>","text":"<p>Revisa las condiciones de COMPRA combinando todos los filtros activos (AND y OR).</p> <p>Esta es la funci\u00f3n principal de entrada que orquesta la l\u00f3gica: 1. Calcula/actualiza los estados de todos los indicadores. 2. Eval\u00faa las se\u00f1ales de entrada (l\u00f3gica OR entre indicadores). 3. Aplica los filtros globales excluyentes (l\u00f3gica AND). 4. Ejecuta la compra y establece el Stop Loss inicial si la se\u00f1al es v\u00e1lida.</p> <p>Parameters:</p> Name Type Description Default <code>strategy_self</code> <code>System</code> <p>Instancia de la clase System (Strategy).</p> required <p>Returns:</p> Type Description <code>None</code> <p>La funci\u00f3n ejecuta la orden de compra si las condiciones se cumplen  (a trav\u00e9s de <code>strategy_self.buy()</code>).</p>"},{"location":"api/motor_core/#trading_engine.core.Logica_Trading.manage_existing_position","title":"<code>manage_existing_position(strategy_self)</code>","text":"<p>Gestiona el cierre de la posici\u00f3n (cierre t\u00e9cnico o stop-loss din\u00e1mico/Trailing Stop).</p> <p>Esta es la funci\u00f3n principal de salida que orquesta la l\u00f3gica: 1. Calcula/actualiza los estados de los indicadores. 2. Eval\u00faa las se\u00f1ales de cierre t\u00e9cnico (l\u00f3gica OR entre indicadores). 3. Si no hay cierre t\u00e9cnico, gestiona el Stop Loss din\u00e1mico (Trailing SL). 4. Ejecuta el cierre por Stop Loss si el precio cae por debajo del l\u00edmite.</p> <p>Parameters:</p> Name Type Description Default <code>strategy_self</code> <code>System</code> <p>Instancia de la clase System (Strategy) con la posici\u00f3n abierta.</p> required <p>Returns:</p> Type Description <code>None</code> <p>La funci\u00f3n ejecuta la orden de venta (cierre) a trav\u00e9s de <code>strategy_self.position.close()</code>  si se cumplen las condiciones de salida o Stop Loss.</p>"},{"location":"api/motor_core/#trading_engine.core.Logica_Trading._actualizar_estados_indicadores","title":"<code>_actualizar_estados_indicadores(strategy_self)</code>","text":"<p>Funci\u00f3n crucial que se ejecuta en cada ciclo de next(). Delega el c\u00e1lculo y  actualizaci\u00f3n de los estados din\u00e1micos (<code>_STATE</code>) a los m\u00f3dulos de indicadores.</p> <p>Este proceso centralizado asegura que todos los estados se calculen antes de  la toma de decisiones de compra o venta en el mismo ciclo (barra de precio).</p> <p>Parameters:</p> Name Type Description Default <code>strategy_self</code> <code>System</code> <p>Instancia de la clase System (Strategy).</p> required <p>Returns:</p> Type Description <code>None</code>"},{"location":"api/motor_indicators/","title":"Referencia API: Indicadores T\u00e9cnicos","text":"<p>Este m\u00f3dulo contiene la implementaci\u00f3n y la l\u00f3gica de filtrado espec\u00edfica para cada indicador t\u00e9cnico.</p>"},{"location":"api/motor_indicators/#filtro-ema-exponential-moving-average","title":"Filtro EMA (Exponential Moving Average)","text":"<p>M\u00f3dulo para la l\u00f3gica de la Media M\u00f3vil Exponencial (EMA).</p> <p>Contiene funciones delegadas para la actualizaci\u00f3n del estado din\u00e1mico (ascendente/descendente/m\u00ednimo/m\u00e1ximo)  de la EMA Lenta, y la generaci\u00f3n de se\u00f1ales de compra/venta basadas en cruces y tendencia.</p>"},{"location":"api/motor_indicators/#trading_engine.indicators.Filtro_EMA.update_ema_state","title":"<code>update_ema_state(strategy_self, verificar_estado_indicador_func)</code>","text":"<p>Actualiza el estado din\u00e1mico (STATE) de la EMA Lenta (ma_slow) basado en sus \u00faltimos valores.</p> <p>Este estado se almacena como variables booleanas de instancia (ej. <code>ema_slow_minimo_STATE</code>)  para ser utilizado posteriormente por las funciones de se\u00f1al y filtrado.</p> <p>Parameters:</p> Name Type Description Default <code>strategy_self</code> <code>System</code> <p>Instancia de la clase System (Strategy), que accede a <code>self.ema_slow_series</code>.</p> required <code>verificar_estado_indicador_func</code> <code>CheckStateFunc</code> <p>Funci\u00f3n auxiliar que calcula el estado din\u00e1mico (minimo, maximo, ascendente, descendente)  de una serie de pandas.</p> required <p>Returns:</p> Type Description <code>None</code> <p>Actualiza los atributos de estado de la instancia <code>strategy_self</code> directamente.</p>"},{"location":"api/motor_indicators/#trading_engine.indicators.Filtro_EMA.check_ema_buy_signal","title":"<code>check_ema_buy_signal(strategy_self, condicion_base_tecnica)</code>","text":"<p>Revisa las se\u00f1ales de compra (l\u00f3gica OR) generadas por la EMA (Cruce, M\u00ednimo o Ascendente).</p> <p>Cualquiera de estas se\u00f1ales puede establecer la <code>condicion_base_tecnica</code> como True.</p> <p>Parameters:</p> Name Type Description Default <code>strategy_self</code> <code>System</code> <p>Instancia de la estrategia, que contiene las series EMA y las configuraciones del usuario.</p> required <code>condicion_base_tecnica</code> <code>bool</code> <p>Condici\u00f3n t\u00e9cnica global actual (el resultado de las se\u00f1ales OR anteriores).</p> required <p>Returns:</p> Type Description <code>tuple</code> <ul> <li>bool: Nueva <code>condicion_base_tecnica</code> (True si se activ\u00f3 una se\u00f1al OR).</li> <li>Optional[str]: Raz\u00f3n del log de la se\u00f1al activada, o None si no hay se\u00f1al de EMA.</li> </ul>"},{"location":"api/motor_indicators/#trading_engine.indicators.Filtro_EMA.apply_ema_global_filter","title":"<code>apply_ema_global_filter(strategy_self, condicion_base_tecnica)</code>","text":"<p>Aplica el filtro global excluyente (Condici\u00f3n AND) de la EMA Lenta.</p> <p>Este filtro puede anular cualquier se\u00f1al de compra generada por la l\u00f3gica OR si  las condiciones de tendencia de la EMA Lenta son desfavorables o si no se cumplen  los requerimientos m\u00ednimos.</p> <p>Parameters:</p> Name Type Description Default <code>strategy_self</code> <code>System</code> <p>Instancia de la estrategia con los par\u00e1metros de filtrado activados.</p> required <code>condicion_base_tecnica</code> <code>bool</code> <p>Condici\u00f3n t\u00e9cnica global actual.</p> required <p>Returns:</p> Type Description <code>bool</code> <p>La <code>condicion_base_tecnica</code> modificada (False si falla el filtro, True en caso contrario).</p>"},{"location":"api/motor_indicators/#trading_engine.indicators.Filtro_EMA.check_ema_sell_signal","title":"<code>check_ema_sell_signal(strategy_self)</code>","text":"<p>Revisa la se\u00f1al de venta de cierre t\u00e9cnico basada en el estado de la EMA Lenta.</p> <p>La se\u00f1al de venta se activa si la EMA Lenta pasa a un estado de tendencia descendente,  sirviendo como filtro de salida de tendencia.</p> <p>Parameters:</p> Name Type Description Default <code>strategy_self</code> <code>System</code> <p>Instancia de la estrategia.</p> required <p>Returns:</p> Type Description <code>tuple</code> <ul> <li>bool: True si la se\u00f1al de venta est\u00e1 activa.</li> <li>Optional[str]: Descripci\u00f3n del cierre para el log, o None.</li> </ul>"},{"location":"api/motor_indicators/#filtro-rsi-relative-strength-index","title":"Filtro RSI (Relative Strength Index)","text":"<p>M\u00f3dulo para la l\u00f3gica del \u00cdndice de Fuerza Relativa (RSI).</p> <p>Contiene funciones delegadas para la actualizaci\u00f3n del estado din\u00e1mico (ascendente/descendente/m\u00ednimo/m\u00e1ximo)  del RSI y la generaci\u00f3n de se\u00f1ales de compra/venta basadas en giros y niveles de fuerza.</p>"},{"location":"api/motor_indicators/#trading_engine.indicators.Filtro_RSI.update_rsi_state","title":"<code>update_rsi_state(strategy_self, verificar_estado_indicador_func)</code>","text":"<p>Actualiza el estado din\u00e1mico (STATE) del indicador RSI.</p> <p>Calcula y almacena el estado din\u00e1mico (m\u00ednimo, m\u00e1ximo, ascendente, descendente)  en las variables de instancia <code>strategy_self</code> si el RSI est\u00e1 activo.</p> <p>Parameters:</p> Name Type Description Default <code>strategy_self</code> <code>System</code> <p>Instancia de la clase System (Strategy), que accede a <code>self.rsi_ind</code>.</p> required <code>verificar_estado_indicador_func</code> <code>CheckStateFunc</code> <p>Funci\u00f3n auxiliar que calcula el estado din\u00e1mico de una serie de pandas.</p> required <p>Returns:</p> Type Description <code>None</code> <p>Actualiza los atributos de estado de la instancia <code>strategy_self</code> directamente.</p>"},{"location":"api/motor_indicators/#trading_engine.indicators.Filtro_RSI.check_rsi_buy_signal","title":"<code>check_rsi_buy_signal(strategy_self, condicion_base_tecnica)</code>","text":"<p>Revisa las se\u00f1ales de compra (l\u00f3gica OR) generadas por el RSI (Giro de M\u00ednimo o Fuerza Pura).</p> <p>La se\u00f1al de compra se activa por un giro desde un extremo (sobreventa) o por una fuerza  continua por encima de un umbral predefinido.</p> <p>Parameters:</p> Name Type Description Default <code>strategy_self</code> <code>System</code> <p>Instancia de la estrategia, que contiene las series RSI y las configuraciones del usuario.</p> required <code>condicion_base_tecnica</code> <code>bool</code> <p>Condici\u00f3n t\u00e9cnica global actual (el resultado de las se\u00f1ales OR anteriores).</p> required <p>Returns:</p> Type Description <code>tuple</code> <ul> <li>bool: Nueva <code>condicion_base_tecnica</code> (True si se activ\u00f3 una se\u00f1al OR).</li> <li>Optional[str]: Raz\u00f3n del log de la se\u00f1al activada, o None si no hay se\u00f1al de RSI.</li> </ul>"},{"location":"api/motor_indicators/#trading_engine.indicators.Filtro_RSI.check_rsi_sell_signal","title":"<code>check_rsi_sell_signal(strategy_self)</code>","text":"<p>Revisa la se\u00f1al de venta de cierre t\u00e9cnico basada en el estado de sobrecompra o tendencia descendente del RSI.</p> <p>La se\u00f1al de venta se activa si la estrategia est\u00e1 configurada para reaccionar a  niveles m\u00e1ximos o a un cambio de tendencia descendente en el RSI.</p> <p>Parameters:</p> Name Type Description Default <code>strategy_self</code> <code>System</code> <p>Instancia de la estrategia.</p> required <p>Returns:</p> Type Description <code>tuple</code> <ul> <li>bool: True si la se\u00f1al de venta est\u00e1 activa.</li> <li>Optional[str]: Descripci\u00f3n del cierre para el log, o None.</li> </ul>"}]}