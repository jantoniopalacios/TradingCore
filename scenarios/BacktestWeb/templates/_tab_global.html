<style>
    /* Suaviza el movimiento al saltar entre secciones */
    html {
        scroll-behavior: smooth;
    }

    /* Opcional: Si quieres que cada bloque tenga su propio espacio 
       y se vea como una tarjeta limpia */
    .config-section {
        scroll-margin-top: 20px; /* Evita que el título quede pegado arriba al saltar */
        background: #ffffff;
        padding: 20px;
        border-radius: 8px;
        margin-bottom: 30px;
        border: 1px solid #dee2e6;
    }
</style>

<h2 class="mb-3">Parámetros Globales</h2>

<h4 class="mb-3 text-primary border-bottom pb-2">Configuración de Datos y Reporte</h4>

<div class="row row-control align-items-center mb-2">
    <div class="col-4"><label for="start_date" class="form-label">Fecha de Inicio (YYYY-MM-DD):</label></div>
    <div class="col-6">
        <input type="date" class="form-control" id="start_date" name="start_date" 
               value="{{ config.start_date }}">
    </div>
    <div class="col-2"><span class="text-muted small">{% if comments.start_date %}<a href="#" title="{{ comments.start_date }}" data-bs-toggle="tooltip">?</a>{% endif %}</span></div>
</div>

<div class="row row-control align-items-center mb-2">
    <div class="col-4"><label for="end_date" class="form-label">Fecha de Fin (YYYY-MM-DD):</label></div>
    <div class="col-6">
        <input type="date" class="form-control" id="end_date" name="end_date" 
               value="{{ config.end_date }}">
    </div>
    <div class="col-2"><span class="text-muted small">{% if comments.end_date %}<a href="#" title="{{ comments.end_date }}" data-bs-toggle="tooltip">?</a>{% endif %}</span></div>
</div>

<div class="row row-control align-items-center mb-2">
    <div class="col-4"><label for="intervalo" class="form-label">Intervalo de Datos:</label></div>
    <div class="col-6">
        <select class="form-select" id="intervalo" name="intervalo">
            {% set options = ["1m", "1h", "1d", "1wk", "1mo"] %}
            {% for option in options %}
                <option value="{{ option }}" {% if config.intervalo == option %}selected{% endif %}>{{ option }}</option>
            {% endfor %}
        </select>
    </div>
    <div class="col-2"><span class="text-muted small">{% if comments.intervalo %}<a href="#" title="{{ comments.intervalo }}" data-bs-toggle="tooltip">?</a>{% endif %}</span></div>
</div>

<div class="row row-control align-items-center mb-2">
    <div class="col-4"><label for="cash" class="form-label">Capital Inicial (CASH):</label></div>
    <div class="col-6">
        <input type="number" class="form-control" id="cash" name="cash" min="1" 
               value="{{ config.cash }}">
    </div>
    <div class="col-2"><span class="text-muted small">{% if comments.cash %}<a href="#" title="{{ comments.cash }}" data-bs-toggle="tooltip">?</a>{% endif %}</span></div>
</div>

<div class="row row-control align-items-center mb-2">
    <div class="col-4"><label for="commission" class="form-label">Comisión (ej: 0.002):</label></div>
    <div class="col-6">
        <input type="number" class="form-control" id="commission" name="commission" step="0.0001" min="0.0" max="1.0" 
               value="{{ config.commission }}">
    </div>
    <div class="col-2"><span class="text-muted small">{% if comments.commission %}<a href="#" title="{{ comments.commission }}" data-bs-toggle="tooltip">?</a>{% endif %}</span></div>
</div>

<div class="row row-control align-items-center mb-4">
    <div class="col-4"><label for="stoploss_percentage_below_close" class="form-label">Stop Loss (%):</label></div>
    <div class="col-6">
        <input type="number" class="form-control" id="stoploss_percentage_below_close" name="stoploss_percentage_below_close" step="0.01" min="0.0" max="1.0" 
               value="{{ config.stoploss_percentage_below_close }}">
    </div>
    <div class="col-2"><span class="text-muted small">{% if comments.stoploss_percentage_below_close %}<a href="#" title="{{ comments.stoploss_percentage_below_close }}" data-bs-toggle="tooltip">?</a>{% endif %}</span></div>
</div>

<div class="row row-control align-items-center mb-2">
    <div class="col-4"><label for="stoploss_swing_enabled" class="form-check-label">Usar SL por Swing:</label></div>
    <div class="col-6">
        <input type="checkbox" class="form-check-input" id="stoploss_swing_enabled" name="stoploss_swing_enabled" value="1"
               {% if config.stoploss_swing_enabled %}checked{% endif %}>
    </div>
    <div class="col-2"><span class="text-muted small"><a href="#" title="Activar Stop Loss dinámico basado en niveles de swing bajo" data-bs-toggle="tooltip">?</a></span></div>
</div>

<div class="row row-control align-items-center mb-2">
    <div class="col-4"><label for="stoploss_swing_lookback" class="form-label">Lookback (velas):</label></div>
    <div class="col-6">
        <input type="number" class="form-control" id="stoploss_swing_lookback" name="stoploss_swing_lookback" min="1" max="50" 
               value="{{ config.stoploss_swing_lookback if config.stoploss_swing_lookback else 10 }}">
    </div>
    <div class="col-2"><span class="text-muted small"><a href="#" title="Períodos para calcular el swing bajo (por defecto 10)" data-bs-toggle="tooltip">?</a></span></div>
</div>

<div class="row row-control align-items-center mb-4">
    <div class="col-4"><label for="stoploss_swing_buffer" class="form-label">Buffer Swing ($):</label></div>
    <div class="col-6">
        <input type="number" class="form-control" id="stoploss_swing_buffer" name="stoploss_swing_buffer" step="0.1" min="0.1" max="10.0"
               value="{{ config.stoploss_swing_buffer if config.stoploss_swing_buffer else 1.0 }}">
    </div>
    <div class="col-2"><span class="text-muted small"><a href="#" title="Buffer en dólares por debajo del swing bajo (por defecto 1.0)" data-bs-toggle="tooltip">?</a></span></div>
</div>

<h4 class="mb-3 text-primary border-bottom pb-2">Opciones de Ejecución y Correo</h4>

<div class="row row-control align-items-center mb-2">
    <div class="col-4"><label for="filtro_fundamental" class="form-check-label fw-bold">Usar Filtro Fundamental:</label></div>
    <div class="col-6">
        <div class="form-check form-switch">
            <input class="form-check-input" type="checkbox" role="switch" id="filtro_fundamental" name="filtro_fundamental" 
                   value="True" 
                   {% if config.filtro_fundamental == 'True' %}checked{% endif %}>
        </div>
        <small class="text-muted d-block">Si está activo, solo se analizarán activos con recomendación "Mantener".</small>
    </div>
    <div class="col-2"></div>
</div>

<div class="row row-control align-items-center mb-2">
    <div class="col-4"><label for="enviar_mail" class="form-check-label fw-bold">Enviar Mail:</label></div>
    <div class="col-6">
        <div class="form-check form-switch">
            <input class="form-check-input" type="checkbox" role="switch" id="enviar_mail" name="enviar_mail" value="True" 
                   {% if config.enviar_mail == 'True' %}checked{% endif %}>
        </div>
    </div>
    <div class="col-2"><span class="text-muted small">{% if comments.enviar_mail %}<a href="#" title="{{ comments.enviar_mail }}" data-bs-toggle="tooltip">?</a>{% endif %}</span></div>
</div>

<div class="row row-control align-items-center mb-2">
    <div class="col-4"><label for="destinatario_email" class="form-label">Destinatario(s) Email:</label></div>
    <div class="col-6">
        <input type="text" class="form-control" id="destinatario_email" name="destinatario_email" 
               value="{{ config.destinatario_email }}">
    </div>
    <div class="col-2"><span class="text-muted small">{% if comments.destinatario_email %}<a href="#" title="{{ comments.destinatario_email }}" data-bs-toggle="tooltip">?</a>{% endif %}</span></div>
</div>