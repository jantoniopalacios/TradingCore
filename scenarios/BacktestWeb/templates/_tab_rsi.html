<h2 class="mb-3">Par√°metros de √çndice de Fuerza Relativa (RSI)</h2>
<p class="alert alert-info">Define las condiciones de compra y venta basadas en los umbrales del RSI, utilizando la l√≥gica de exclusividad.</p>

<div class="row">
    <div class="col-6 border-end">
        <h4 class="mb-3 text-primary">Configuraci√≥n Principal</h4>

        <div class="row row-control align-items-center mb-3">
            <div class="col-6"><label for="rsi" class="form-check-label fw-bold">Activar RSI:</label></div>
            <div class="col-4">
                <div class="form-check form-switch">
                    <input class="form-check-input" type="checkbox" role="switch" id="rsi" name="rsi" value="True" 
                           {% if config.rsi == 'True' %}checked{% endif %}>
                </div>
            </div>
            <div class="col-2">
                <span class="text-muted small">{% if comments.rsi %}<a href="#" title="{{ comments.rsi }}">?</a>{% endif %}</span>
            </div>
        </div>

        <div class="row row-control align-items-center mb-2">
            <div class="col-6"><label for="rsi_period" class="form-label">Per√≠odo de C√°lculo (RSI Period):</label></div>
            <div class="col-4">
                <input type="number" class="form-control" id="rsi_period" name="rsi_period" min="2" value="{{ config.rsi_period }}">
            </div>
            <div class="col-2"><span class="text-muted small">{% if comments.rsi_period %}<a href="#" title="{{ comments.rsi_period }}">?</a>{% endif %}</span></div>
        </div>

        <div class="row row-control align-items-center mb-4">
            <div class="col-6"><label for="rsi_high_level" class="form-label text-danger">Nivel M√°ximo (Sobrecompra):</label></div>
            <div class="col-4">
                <input type="number" class="form-control" id="rsi_high_level" name="rsi_high_level" min="50" max="100" value="{{ config.rsi_high_level }}">
            </div>
            <div class="col-2"><span class="text-muted small">{% if comments.rsi_high_level %}<a href="#" title="{{ comments.rsi_high_level }}">?</a>{% endif %}</span></div>
        </div>
        
        <div class="row row-control align-items-center mb-2">
            <div class="col-6"><label for="rsi_strength_threshold" class="form-label">Umbral de Fuerza:</label></div>
            <div class="col-4">
                <input type="number" class="form-control" id="rsi_strength_threshold" name="rsi_strength_threshold" min="0" max="100" value="{{ config.rsi_strength_threshold }}">
            </div>
            <div class="col-2"><span class="text-muted small">{% if comments.rsi_strength_threshold %}<a href="#" title="{{ comments.rsi_strength_threshold }}">?</a>{% endif %}</span></div>
        </div>
        <p class="text-muted small ms-5">Usado para buscar continuaci√≥n (por encima de este valor).</p>

        <div class="row row-control align-items-center mb-2">
            <div class="col-6"><label for="rsi_low_level" class="form-label text-success">Nivel M√≠nimo (Sobreventa):</label></div>
            <div class="col-4">
                <input type="number" class="form-control" id="rsi_low_level" name="rsi_low_level" min="0" max="50" value="{{ config.rsi_low_level }}">
            </div>
            <div class="col-2"><span class="text-muted small">{% if comments.rsi_low_level %}<a href="#" title="{{ comments.rsi_low_level }}">?</a>{% endif %}</span></div>
        </div>
        <p class="text-muted small ms-5">Usado como filtro de precio 'barato' antes de la ruptura. (Sugerido 40/45).</p>
        <p class="text-muted small ms-5 text-danger">‚ö†Ô∏è Se asume que esta variable es un filtro y NO la condici√≥n principal de Venta (usa 'Overbought').</p>
    </div>

    <div class="col-6">
        <h4 class="mb-3 text-dark">Se√±ales de Compra y Cierres</h4>
        <p class="text-muted small">Marca qu√© condiciones pueden generar compra (OR) o rechazarla (AND).</p>

        <h5 class="mt-4 text-success">üü¢ Se√±ales de COMPRA (L√≥gica OR - Si cumple CUALQUIERA)</h5>
        <p class="text-muted small mb-2">Marca las condiciones que pueden generar una compra.</p>
        
        <div class="form-check mb-2">
            <input class="form-check-input" type="checkbox" id="rsi_minimo" name="rsi_minimo" value="true" 
                   {% if config.get('rsi_minimo') == 'True' or config.get('rsi_minimo') == True %}checked{% endif %}>
            <label class="form-check-label" for="rsi_minimo">
                <strong>M√≠nimo (Sobreventa):</strong> Compra cuando RSI toca valle local (RSI &lt; {{ config.rsi_low_level }})
            </label>
        </div>

        <div class="form-check mb-4">
            <input class="form-check-input" type="checkbox" id="rsi_ascendente" name="rsi_ascendente" value="true" 
                   {% if config.get('rsi_ascendente') == 'True' or config.get('rsi_ascendente') == True %}checked{% endif %}>
            <label class="form-check-label" for="rsi_ascendente">
                <strong>Ascendente:</strong> Compra cuando RSI est√° subiendo (se recupera del valle)
            </label>
        </div>

        <h5 class="mt-4 text-danger">üî¥ Se√±ales de BLOQUEO/VENTA (L√≥gica AND - Rechaza si cumple CUALQUIERA)</h5>
        <p class="text-muted small mb-2">Marca las condiciones que pueden rechazar la compra o cerrar posici√≥n abierta.</p>
        
        <div class="form-check mb-2">
            <input class="form-check-input" type="checkbox" id="rsi_maximo" name="rsi_maximo" value="true" 
                   {% if config.get('rsi_maximo') == 'True' or config.get('rsi_maximo') == True %}checked{% endif %}>
            <label class="form-check-label" for="rsi_maximo">
                <strong>M√°ximo (Sobrecompra):</strong> Rechaza compra / Vende si RSI toca pico (RSI &gt; {{ config.rsi_high_level }})
            </label>
        </div>

        <div class="form-check mb-4">
            <input class="form-check-input" type="checkbox" id="rsi_descendente" name="rsi_descendente" value="true" 
                   {% if config.get('rsi_descendente') == 'True' or config.get('rsi_descendente') == True %}checked{% endif %}>
            <label class="form-check-label" for="rsi_descendente">
                <strong>Descendente:</strong> Rechaza compra / Vende si RSI est√° bajando (pierde fuerza)
            </label>
        </div>

        <div class="alert alert-info mt-3">
            <small>
                <strong>üí° Ejemplos de combinaciones:</strong><br>
                ‚úì <em>M√≠nimo + M√°ximo</em>: Compra en valles, vende en picos<br>
                ‚úì <em>Ascendente sin deniegos</em>: Agresivo, compra cada vez que sube<br>
                ‚ö†Ô∏è <em>Solo deniegos sin se√±ales</em>: 0 trades (incompatible)<br>
            </small>
        </div>
    </div>
</div>